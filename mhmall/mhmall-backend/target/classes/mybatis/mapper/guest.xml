<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="guest">

	<!-- 비회원 상세 -->
	<select id="selectOne" parameterType="guestvo" resultType="guestvo">
		SELECT
		cast(AES_DECRYPT(guest_name, #{aesKey}) as char) as guestName,
		cast(AES_DECRYPT(guest_phone, #{aesKey}) as char) as guestPhone,
		guest_password as guestPassword
		FROM guest
		where orders_no=#{ordersNo}
	</select>


	<!-- 비회원 등록 -->
	<insert id="insert" parameterType="guestvo">
		insert into guest(orders_no, guest_name, guest_phone, guest_password)
		values(
		#{ordersNo},
		AES_ENCRYPT(#{guestName}, #{aesKey}),
		AES_ENCRYPT(#{guestPhone}, #{aesKey}),
		SHA2(#{guestPassword}, 512)
		)
	</insert>
	
</mapper>
